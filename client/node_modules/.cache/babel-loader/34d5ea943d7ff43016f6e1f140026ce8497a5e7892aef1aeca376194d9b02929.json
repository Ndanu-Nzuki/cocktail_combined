{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Routes,Route,Navigate}from\"react-router-dom\";import TopOfPage from\"./components/Landing\";import CategoriesComponent from\"./components/Categories\";import RandomCocktail from\"./components/RandomSelection\";import Login from\"./components/UserLogin\";import Register from\"./components/Register\";import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const API_URL=process.env.REACT_APP_API_URL||'http://127.0.0.1:5000';function App(){const[isLoggedIn,setIsLoggedIn]=useState(false);useEffect(()=>{checkLoginStatus();},[]);const checkLoginStatus=async()=>{const token=localStorage.getItem('token');if(token){try{const response=await fetch(`${API_URL}/check-auth`,{headers:{'Authorization':`Bearer ${token}`},credentials:'include'});if(response.ok){setIsLoggedIn(true);}else{// Token is invalid or expired\nlocalStorage.removeItem('token');setIsLoggedIn(false);}}catch(error){console.error('Error checking authentication:',error);setIsLoggedIn(false);}}else{setIsLoggedIn(false);}};const handleLogout=()=>{localStorage.removeItem('token');setIsLoggedIn(false);};return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(TopOfPage,{}),/*#__PURE__*/_jsx(RandomCocktail,{isLoggedIn:isLoggedIn}),/*#__PURE__*/_jsx(CategoriesComponent,{isLoggedIn:isLoggedIn})]})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:isLoggedIn?/*#__PURE__*/_jsx(Navigate,{to:\"/\",replace:true}):/*#__PURE__*/_jsx(Login,{setIsLoggedIn:setIsLoggedIn})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:isLoggedIn?/*#__PURE__*/_jsx(Navigate,{to:\"/\",replace:true}):/*#__PURE__*/_jsx(Register,{})})]})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","Routes","Route","Navigate","TopOfPage","CategoriesComponent","RandomCocktail","Login","Register","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","API_URL","process","env","REACT_APP_API_URL","App","isLoggedIn","setIsLoggedIn","checkLoginStatus","token","localStorage","getItem","response","fetch","headers","credentials","ok","removeItem","error","console","handleLogout","className","children","path","element","to","replace"],"sources":["/Users/Babygirl/Development/code/Phase-4/Cocktail_FrontEnd/client/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Routes, Route, Navigate } from \"react-router-dom\";\nimport TopOfPage from \"./components/Landing\";\nimport CategoriesComponent from \"./components/Categories\";\nimport RandomCocktail from \"./components/RandomSelection\";\nimport Login from \"./components/UserLogin\";\nimport Register from \"./components/Register\";\n\nconst API_URL = process.env.REACT_APP_API_URL || 'http://127.0.0.1:5000';\n\nfunction App() {\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n\n  useEffect(() => {\n    checkLoginStatus();\n  }, []);\n\n  const checkLoginStatus = async () => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      try {\n        const response = await fetch(`${API_URL}/check-auth`, {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          },\n          credentials: 'include'\n        });\n        if (response.ok) {\n          setIsLoggedIn(true);\n        } else {\n          // Token is invalid or expired\n          localStorage.removeItem('token');\n          setIsLoggedIn(false);\n        }\n      } catch (error) {\n        console.error('Error checking authentication:', error);\n        setIsLoggedIn(false);\n      }\n    } else {\n      setIsLoggedIn(false);\n    }\n  };\n\n  const handleLogout = () => {\n    localStorage.removeItem('token');\n    setIsLoggedIn(false);\n  };\n\n  return (\n    <div className=\"App\">\n      <Routes>\n        <Route path=\"/\" element={\n          <>\n            <TopOfPage />\n            <RandomCocktail isLoggedIn={isLoggedIn} />\n            <CategoriesComponent isLoggedIn={isLoggedIn} />\n          </>\n        } />\n        <Route \n          path=\"/login\" \n          element={\n            isLoggedIn ? \n            <Navigate to=\"/\" replace /> : \n            <Login setIsLoggedIn={setIsLoggedIn} />\n          } \n        />\n        <Route \n          path=\"/register\" \n          element={\n            isLoggedIn ? \n            <Navigate to=\"/\" replace /> : \n            <Register />\n          } \n        />\n      </Routes>\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}